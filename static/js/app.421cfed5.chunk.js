(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{274:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var a=n(20),r=n.n(a),o=n(0),l=n.n(o),u=n(3),c=n(26),i=n(5),s=n(8),d=n(77),m=n(213),p=n(396),h=n(395),b=n(275),f=n(18),g=n.n(f),x=n(211),w=n(27);function v(e){var t=Object(w.useNavigation)();return l.a.createElement(x.a.Header,{style:{backgroundColor:e.color?e.color:"#6d4c41"}},e.drawerAvailable?l.a.createElement(x.a.Action,{icon:"menu",size:30,onPress:function(){return t.dispatch(w.DrawerActions.toggleDrawer)}}):null,l.a.createElement(x.a.Content,{title:e.title,style:{alignItems:"center"}}))}u.a.create({centerComponent:{fontSize:20}});var E=n(63);function C(e){return l.a.createElement(E.a,{placeholder:e.placeholder,style:y(e).textInput,onChangeText:e.onChangeText,value:e.value,secureTextEntry:e.obscureText,multiline:e.multiline||!1,maxLength:e.maxLength||void 0})}var y=function(e){return u.a.create({textInput:{width:e.width,height:e.height||void 0,fontSize:23,padding:3,borderBottomWidth:e.outlinedBorder?void 0:2,borderColor:"black",borderWidth:e.outlinedBorder?5:void 0,borderRadius:e.outlinedBorder?25:0}})},T=n(155),S=n(32);function k(e){return l.a.createElement(S.a,{style:I(e).button,onPress:e.onPress},l.a.createElement(c.a,{style:I(e).buttonText},e.buttonText))}var I=function(e){return u.a.create({button:{backgroundColor:e.buttonColor,justifyContent:"center",alignItems:"center",borderRadius:23,paddingHorizontal:7,paddingVertical:5,shadowOpacity:.5,shadowRadius:2,shadowOffset:{width:0,height:4},elevation:20},buttonText:{fontSize:23,color:e.buttonTextColor,fontWeight:"bold",fontFamily:"cursive"}})},O=n(272),B=n.n(O),P=n(215),j=n(205),F=n(69);F.a.initializeApp({apiKey:"AIzaSyCtJWEiHkscsBR9mhAV8PzPn7Ijy46bOdI",authDomain:"barter-app-1d780.firebaseapp.com",projectId:"barter-app-1d780",storageBucket:"barter-app-1d780.appspot.com",messagingSenderId:"544892223600",appId:"1:544892223600:web:7f83694a6daecd2992f4b5"});var D,A=F.a.firestore(),N={firestore:{collections:{names:{users:"users",itemsToExchange:"itemsToExchange"},users:{names:{name:"name",emailID:"emailID"}}}}};!function(e){e[e.successful=0]="successful",e[e.unknownError=1]="unknownError",e[e.badCredentials=2]="badCredentials",e[e.emptyField1=3]="emptyField1",e[e.emptyField2=4]="emptyField2",e[e.emailBadlyFormatted=5]="emailBadlyFormatted",e[e.userNotFound=6]="userNotFound",e[e.userDisabled=7]="userDisabled",e[e.operationNotAllowed=8]="operationNotAllowed",e[e.weakPassword=9]="weakPassword",e[e.emailAlreadyInUse=10]="emailAlreadyInUse",e[e.shortDetails=11]="shortDetails"}(D||(D={}));var R=D;function L(e){var t=Object(d.a)(),n=Object(o.useState)(""),a=g()(n,2),s=a[0],m=a[1],p=Object(o.useState)(""),h=g()(p,2),b=h[0],f=h[1],x=Object(o.useState)(!1),w=g()(x,2),E=w[0],y=w[1],S=Object(o.useState)(""),I=g()(S,2),O=I[0],D=I[1],L=Object(o.useState)(""),z=g()(L,2),U=z[0],W=z[1],H=Object(o.useState)(""),q=g()(H,2),V=q[0],J=q[1],G=Object(o.useState)(""),K=g()(G,2),M=K[0],Q=K[1],X=[{placeholder:"Email",onChangeText:function(e){return m(e)},value:s},{placeholder:"Password",onChangeText:function(e){return f(e)},value:b,obscureText:!0}],Y=[{buttonColor:"#4CAF50",buttonText:"Sign In",onPress:function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(te(s,b));case 2:t=n.sent,n.t0=t,n.next=n.t0===R.emptyField1?6:n.t0===R.emptyField2?8:n.t0===R.emailBadlyFormatted?10:n.t0===R.badCredentials?12:n.t0===R.successful?14:n.t0===R.userNotFound?16:n.t0===R.userDisabled?18:20;break;case 6:return alert("Empty email"),n.abrupt("break",21);case 8:return alert("Empty password"),n.abrupt("break",21);case 10:return alert("Email badly formatted"),n.abrupt("break",21);case 12:return alert("Wrong credentials"),n.abrupt("break",21);case 14:return e.navigation.replace("homeScreen"),n.abrupt("break",21);case 16:return alert("User not found"),n.abrupt("break",21);case 18:return alert("User disabled"),n.abrupt("break",21);case 20:alert("Some unknown error occurred");case 21:case"end":return n.stop()}}),null,null,null,Promise)}},{buttonColor:"#3F51B5",buttonText:"Sign Up",onPress:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(ne(s,b));case 2:e=t.sent,t.t0=e,t.next=t.t0===R.emptyField1?6:t.t0===R.emptyField2?8:t.t0===R.emailBadlyFormatted?10:t.t0===R.successful?12:t.t0===R.emailAlreadyInUse?14:t.t0===R.weakPassword?16:t.t0===R.operationNotAllowed?18:20;break;case 6:return alert("Empty email"),t.abrupt("break",21);case 8:return alert("Empty password"),t.abrupt("break",21);case 10:return alert("Email badly formatted"),t.abrupt("break",21);case 12:return y(!0),t.abrupt("break",21);case 14:return alert("Email already in use"),t.abrupt("break",21);case 16:return alert("Weak password"),t.abrupt("break",21);case 18:return alert("Operation not allowed"),t.abrupt("break",21);case 20:alert("Some unknown error occurred");case 21:case"end":return t.stop()}}),null,null,null,Promise)}}],Z=[{placeholder:"Name",onChangeText:function(e){return Q(e)},value:M},{placeholder:"Email ID",onChangeText:function(e){return D(e)},value:O},{placeholder:"Address",onChangeText:function(e){return W(e)},value:U},{placeholder:"Contact No.",onChangeText:function(e){return J(e)},value:V}],$=[{buttonText:"Submit",buttonColor:"purple",onPress:function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return y(!1),n.next=3,r.a.awrap(ae(M,O,U,V));case 3:t=n.sent,n.t0=t,n.next=n.t0===R.successful?7:9;break;case 7:return e.navigation.navigate("homeScreen"),n.abrupt("break",10);case 9:alert("Some Error Occurred");case 10:case"end":return n.stop()}}),null,null,null,Promise)}},{buttonText:"Cancel",buttonColor:"red",onPress:function(){return y(!1)}}],_=function(e){return u.a.create({background:{backgroundColor:"#F8BE85",height:"100vh"},modal:{marginLeft:e.width/2-e.width/2/2,marginTop:e.height/2-e.height/2/2,width:e.width/2,height:e.height/1.9,shadowOpacity:.5,shadowRadius:2,shadowOffset:{width:0,height:6},elevation:20,backgroundColor:"#FFC107",borderRadius:20},modalContent:{justifyContent:"flex-start",alignItems:"center",height:"100%",width:"100%",borderRadius:20},modalHeadingContainer:{paddingVertical:1,alignItems:"center",width:"100%"},modalHeading:{fontFamily:"cursive",fontSize:30,fontWeight:"bold"},modalButtonGroupContainer:{paddingTop:5},modalButtonContainer:{paddingBottom:e.height/60},imageContainer:{paddingVertical:20,justifyContent:"center",alignItems:"center"},avatar:{backgroundColor:"white",borderWidth:5},detailsContainer:{width:"100%",alignItems:"center"},textInputContainer:{paddingTop:20},buttonContainer:{paddingTop:15}})},ee=function(e,t){return null==e||0==e.trim().length?R.emptyField1:null==t||0==t.trim().length?R.emptyField2:B.a.validate(e)?R.successful:R.emailBadlyFormatted},te=function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if((n=ee(e,t))==R.successful){o.next=3;break}return o.abrupt("return",n);case 3:return o.prev=3,o.next=6,r.a.awrap(F.a.auth().signInWithEmailAndPassword(e,t));case 6:return o.abrupt("return",R.successful);case 9:o.prev=9,o.t0=o.catch(3),console.error(o.t0),a=o.t0.code,o.t1=a,o.next="auth/wrong-password"===o.t1?16:"auth/user-not-found"===o.t1?18:"auth/user-disabled"===o.t1?20:"auth/invalid-email"===o.t1?22:24;break;case 16:return o.abrupt("return",R.badCredentials);case 18:return o.abrupt("return",R.userNotFound);case 20:return o.abrupt("return",R.userDisabled);case 22:return o.abrupt("return",R.emailBadlyFormatted);case 24:return o.abrupt("return",R.unknownError);case 25:case 26:case"end":return o.stop()}}),null,null,[[3,9]],Promise)},ne=function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if((n=ee(e,t))==R.successful){o.next=3;break}return o.abrupt("return",n);case 3:return o.prev=3,o.next=6,r.a.awrap(F.a.auth().createUserWithEmailAndPassword(e,t));case 6:return o.abrupt("return",R.successful);case 9:o.prev=9,o.t0=o.catch(3),console.error(o.t0),a=o.t0.code,o.t1=a,o.next="auth/email-already-in-use"===o.t1?16:"auth/invalid-email"===o.t1?18:"auth/operation-not-allowed"===o.t1?20:"auth/weak-password"===o.t1?22:24;break;case 16:return o.abrupt("return",R.emailAlreadyInUse);case 18:return o.abrupt("return",R.emailBadlyFormatted);case 20:return o.abrupt("return",R.operationNotAllowed);case 22:return o.abrupt("return",R.weakPassword);case 24:return o.abrupt("return",R.unknownError);case 25:case 26:case"end":return o.stop()}}),null,null,[[3,9]],Promise)},ae=function(e,t,n,a){return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.a.awrap(A.collection(N.firestore.collections.names.users).add({name:e,emailID:t,address:n,contactNo:a}));case 3:return o.sent,o.abrupt("return",R.successful);case 7:return o.prev=7,o.t0=o.catch(0),console.error(o.t0),o.abrupt("return",R.unknownError);case 11:case"end":return o.stop()}}),null,null,[[0,7]],Promise)};return l.a.createElement(i.a,{style:_(t).background},l.a.createElement(i.a,null,l.a.createElement(v,{title:"Login"}),l.a.createElement(P.a,null,l.a.createElement(j.a,{dismissable:!1,visible:E,contentContainerStyle:_(t).modalContent,style:_(t).modal},l.a.createElement(i.a,{style:_(t).modalHeadingContainer},l.a.createElement(c.a,{style:_(t).modalHeading},"Information:")),l.a.createElement(i.a,null,Z.map((function(e){return l.a.createElement(i.a,null,l.a.createElement(C,{placeholder:e.placeholder,onChangeText:e.onChangeText,value:e.value,obscureText:!1,width:t.width/2/2}))})),l.a.createElement(i.a,{style:_(t).modalButtonGroupContainer},$.map((function(e){return l.a.createElement(i.a,{style:_(t).modalButtonContainer},l.a.createElement(k,{buttonText:e.buttonText,buttonColor:e.buttonColor,onPress:e.onPress,buttonTextColor:"white"}))})))))),l.a.createElement(i.a,{style:_(t).imageContainer},l.a.createElement(T.a,{rounded:!0,overlayContainerStyle:_(t).avatar,size:t.height/3,icon:{type:"ionicon",name:"leaf",color:"#63b175"}})),l.a.createElement(i.a,{style:_(t).detailsContainer},X.map((function(e){return l.a.createElement(i.a,{style:_(t).textInputContainer},l.a.createElement(C,{placeholder:e.placeholder,width:t.width/2,value:e.value,onChangeText:e.onChangeText,obscureText:!!e.obscureText&&e.obscureText}))})),l.a.createElement(i.a,null,Y.map((function(e){return l.a.createElement(i.a,{style:_(t).buttonContainer},l.a.createElement(k,{buttonText:e.buttonText,buttonTextColor:"white",buttonColor:e.buttonColor,onPress:e.onPress}))}))))))}var z=n(214),U=n(397);var W=function(){var e=Object(d.a)(),t=Object(o.useState)(""),n=g()(t,2),a=n[0],c=n[1],s=Object(o.useState)(""),m=g()(s,2),p=m[0],h=m[1],b=[{placeholder:"Name",onChangeText:function(e){return c(e)},value:a},{placeholder:"Description",onChangeText:function(e){return h(e)},value:p,maxLength:200,height:.6*e.height,multiline:!0}],f=function(e){return u.a.create({allTextInputsContainer:{paddingLeft:e.width/2-e.width/2/2},textInputContainer:{paddingTop:20},textInput:{fontSize:20},submitButtonContainer:{paddingTop:20,paddingLeft:e.width/2-50,paddingRight:e.width/2-50}})},x=function(e,t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Name and Description: "+e+" "+t),null!=e&&0!=e.trim().length){n.next=3;break}return n.abrupt("return",R.emptyField1);case 3:if(null!=t&&0!=t.trim().length){n.next=5;break}return n.abrupt("return",R.emptyField2);case 5:if(!(t.trim().length<10)){n.next=7;break}return n.abrupt("return",R.shortDetails);case 7:return n.next=9,r.a.awrap(A.collection(N.firestore.collections.names.itemsToExchange).add({name:e,description:t,timeStamp:F.a.firestore.Timestamp.now()}).then((function(e){return R.successful})).catch((function(e){return R.unknownError})));case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}}),null,null,null,Promise)};return l.a.createElement(i.a,null,l.a.createElement(v,{title:"Request Screen",color:"#96D25A"}),l.a.createElement(i.a,{style:f(e).allTextInputsContainer},b.map((function(t){return l.a.createElement(i.a,{style:f(e).textInputContainer},l.a.createElement(C,{placeholder:t.placeholder,onChangeText:t.onChangeText,value:t.value,obscureText:!1,width:e.width/2,height:t.height||void 0,multiline:t.multiline||!1,maxLength:t.maxLength||void 0,outlinedBorder:!0}))}))),l.a.createElement(i.a,{style:f(e).submitButtonContainer},l.a.createElement(k,{buttonColor:"red",buttonText:"Submit",buttonTextColor:"white",onPress:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(x(a,p));case 2:e=t.sent,t.t0=e,t.next=t.t0===R.emptyField1?6:t.t0===R.emptyField2?8:t.t0===R.shortDetails?10:t.t0===R.successful?12:14;break;case 6:return alert("Please fill the name field!"),t.abrupt("break",15);case 8:return alert("Please fill the description field!"),t.abrupt("break",15);case 10:return alert("Description too short!"),t.abrupt("break",15);case 12:return alert("Data submitted successfully!"),t.abrupt("break",15);case 14:alert("Some error occurred!");case 15:case"end":return t.stop()}}),null,null,null,Promise)}})))},H=n(22),q=n.n(H),V=n(156),J=n(90),G=n(206);var K=function(e){var t=Object(o.useState)([]),n=g()(t,2),a=n[0],r=n[1],c=Object(o.useState)(null),s=g()(c,2),m=s[0],p=s[1],h=Object(d.a)();Object(o.useEffect)((function(){f(null)}),[]);var b=function(e){return u.a.create({exchangeButtonContainer:{height:"50%",width:.2*e.width},divider:{backgroundColor:"rgba(0,0,0,0.3)"}})},f=function(e){try{null!=e?A.collection(N.firestore.collections.names.itemsToExchange).orderBy("timeStamp").startAfter(e).limit(1):A.collection(N.firestore.collections.names.itemsToExchange).limit(1),A.collection(N.firestore.collections.names.itemsToExchange).onSnapshot((function(e){var t;t=e.docs.map((function(e){return e.data()})),r((function(e){return e.push.apply(e,q()(t)),e})),t.length>0&&p((function(e){return t[t.length-1].timeStamp}))}))}catch(t){alert("Some error Occurred in fetching the data!"),console.log(t)}},x=function(e){alert("Exchanging item with name "+e.name)};return l.a.createElement(i.a,null,l.a.createElement(v,{title:"Exchange Screen",color:"#ffca28",drawerAvailable:!0}),l.a.createElement(i.a,null,l.a.createElement(V.a,{data:a,renderItem:function(e){var t=e.item;e.index;return l.a.createElement(i.a,null,l.a.createElement(i.a,null,l.a.createElement(J.a.Item,{theme:{colors:{text:"black"}},left:function(e){return l.a.createElement(J.a.Icon,{icon:"table-furniture",color:"black"})},right:function(e){return l.a.createElement(i.a,{style:b(h).exchangeButtonContainer},l.a.createElement(k,{buttonText:"Exchange",buttonTextColor:"white",buttonColor:"red",onPress:function(){return x(t)}}))},title:t.name,description:t.description}),l.a.createElement(G.a,{style:b(h).divider})))},keyExtractor:function(e,t){return t.toString()},onEndReachedThreshold:10,onEndReached:function(){return f(m)}})))},M=n(160);var Q=function(){var e=Object(U.a)();return l.a.createElement(e.Navigator,{barStyle:{backgroundColor:"purple"}},l.a.createElement(e.Screen,{name:"exchangeScreen",component:K,options:{tabBarLabel:"Exchange Screen",title:"Exchange Items",tabBarIcon:function(e){var t=e.color;return l.a.createElement(M.default,{name:"handshake-o",size:20,color:t})}}}),l.a.createElement(e.Screen,{name:"requestScreen",component:W,options:{tabBarLabel:"Request Screen",title:"Request Items",tabBarIcon:function(e){var t=e.color;return l.a.createElement(M.default,{name:"envelope-open",size:20,color:t})}}}))};var X=function(){var e=Object(o.useState)(""),t=g()(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),c=g()(r,2),s=c[0],m=c[1],p=Object(o.useState)(""),h=g()(p,2),b=h[0],f=h[1],x=Object(o.useState)(""),w=g()(x,2),E=w[0],y=w[1],T=Object(o.useState)(""),S=g()(T,2),I=S[0],O=S[1],B=Object(d.a)();Object(o.useEffect)((function(){var e,t=null==(e=F.a.auth().currentUser)?void 0:e.email;t?D(t):alert("User not signed in")}),[]);var P=function(e){return u.a.create({background:{backgroundColor:"#CDDC39",height:"100vh"},textInputContainer:{paddingTop:e.height/50,alignItems:"center"},buttonContainer:{paddingTop:e.height/50,paddingLeft:e.width/2-e.width/4/2,paddingRight:e.width/2-e.width/4/2}})},j=N.firestore,D=function(e){try{A.collection(j.collections.names.users).where("emailID","==",e).limit(1).onSnapshot((function(e){e.docs.map((function(e){O(e.id);var t=e.data();a(t.name),m(t.emailID),f(t.address),y(t.contactNo)}))}))}catch(t){console.error(t),alert("Some error occurred while fetching the details.")}},R=[{placeholder:"Name",onChangeText:function(e){return a(e)},value:n},{placeholder:"Email ID",onChangeText:function(e){return m(e)},value:s},{placeholder:"Address",onChangeText:function(e){return f(e)},value:b},{placeholder:"Contact No.",onChangeText:function(e){return y(e)},value:E}];return l.a.createElement(i.a,{style:P(B).background},l.a.createElement(v,{title:"Settings Screen",color:"#1e9c91",drawerAvailable:!0}),l.a.createElement(i.a,null,l.a.createElement(i.a,null,R.map((function(e){return l.a.createElement(i.a,{style:P(B).textInputContainer},l.a.createElement(C,{placeholder:e.placeholder,onChangeText:e.onChangeText,value:e.value,obscureText:!1,outlinedBorder:!0,height:B.height/12,width:B.width/2}))}))),l.a.createElement(i.a,{style:P(B).buttonContainer},l.a.createElement(k,{buttonColor:"rgba(88,111,121,1.0)",buttonText:"Submit",buttonTextColor:"white",onPress:function(){return function(e,t,n,a){try{A.collection(j.collections.names.users).doc(I).update({name:e,emailID:t,address:n,contactNo:a}),alert("User details updated successfully")}catch(r){console.error(r),alert("Some error occured in saving the user details")}}(n,s,b,E)}}))))};function Y(){var e=Object(p.a)(),t={headerShown:!1},n=[{name:"loginScreen",component:L},{name:"homeScreen",component:Q}];return l.a.createElement(e.Navigator,{initialRouteName:"loginScreen"},n.map((function(n){return l.a.createElement(e.Screen,{name:n.name,component:n.component,options:t})})))}function Z(){Object(d.a)();var e=Object(h.a)(),t={headerShown:!1},n=function(e){return u.a.create({drawer:{borderTopRightRadius:20,borderBottomRightRadius:20},drawerContent:{flex:1},logOutButton:{flex:1,justifyContent:"flex-end",paddingLeft:"5%",paddingBottom:"5%"},logOutButtonContent:{flexDirection:"row",alignItems:"center"},logOutButtonText:{paddingLeft:"3%",fontWeight:"bold",fontSize:15}})},a=[{name:"Home",component:Y},{name:"Settings",component:X}];return l.a.createElement(z.a,null,l.a.createElement(m.a,null,l.a.createElement(e.Navigator,{initialRouteName:"homeScreen",drawerStyle:n().drawer,drawerContent:function(e){return l.a.createElement(i.a,{style:n().drawerContent},l.a.createElement(b.a,{state:e.state,navigation:e.navigation,descriptors:e.descriptors,progress:e.progress}),l.a.createElement(i.a,{style:n().logOutButton},l.a.createElement(V.b,{onPress:function(){return t=e.navigation,r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(F.a.auth().signOut());case 2:t.navigate("loginScreen");case 3:case"end":return e.stop()}}),null,null,null,Promise);var t}},l.a.createElement(i.a,{style:n().logOutButtonContent},l.a.createElement(T.b,{name:"power-off",type:"font-awesome"}),l.a.createElement(c.a,{style:n().logOutButtonText},"Log Out")))))},drawerType:"front"},a.map((function(n){return l.a.createElement(e.Screen,{name:n.name,component:n.component,options:t})})))))}!function(){if("web"==s.a.OS){var e=document.createElement("style");e.textContent="textarea, select, input, button { outline: none!important; }",document.head.append(e)}}()},306:function(e,t,n){e.exports=n(376)}},[[306,1,2]]]);
//# sourceMappingURL=app.421cfed5.chunk.js.map