(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{276:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var a=n(20),r=n.n(a),o=n(0),i=n.n(o),c=n(3),l=n(24),u=n(4),s=n(8),d=n(56),m=n(216),p=n(399),h=n(398),b=n(277),f=n(18),g=n.n(f),v=n(213),E=n(123),w=n(26),x=n(48);x.a.initializeApp({apiKey:"AIzaSyCtJWEiHkscsBR9mhAV8PzPn7Ijy46bOdI",authDomain:"barter-app-1d780.firebaseapp.com",projectId:"barter-app-1d780",storageBucket:"barter-app-1d780.appspot.com",messagingSenderId:"544892223600",appId:"1:544892223600:web:7f83694a6daecd2992f4b5"});var y=x.a.firestore(),C={firestore:{collections:{names:{users:"users",itemsToExchange:"itemsToExchange",barters:"barters",notifications:"notifications"},users:{names:{name:"name",emailID:"emailID"}},barters:{names:{donorID:"donorID"}}}}};function S(e){var t=Object(o.useState)(0),n=g()(t,2),a=n[0],r=n[1],c=Object(w.useNavigation)();return Object(o.useEffect)((function(){var t;e.displayNotifications&&y.collection(C.firestore.collections.names.notifications).where("receiverID","==",null==(t=x.a.auth().currentUser)?void 0:t.email).where("read","==",!1).onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));r(t.length)}))})),i.a.createElement(v.a.Header,{style:{backgroundColor:e.color?e.color:"#6d4c41"}},e.drawerAvailable?i.a.createElement(v.a.Action,{icon:"menu",size:30,onPress:function(){return c.dispatch(w.DrawerActions.toggleDrawer)}}):e.backButtonAvailable?i.a.createElement(v.a.Action,{icon:"chevron-left",size:30,onPress:function(){c.canGoBack()&&c.goBack()}}):i.a.createElement(u.a,null),i.a.createElement(v.a.Content,{title:e.title,style:{alignItems:"center"}}),e.displayNotifications?i.a.createElement(u.a,null,i.a.createElement(v.a.Action,{icon:"bell",size:30,onPress:function(){return c.navigate("notificationsScreen")}}),i.a.createElement(E.a,{style:k.badge,visible:!0},a.toString())):i.a.createElement(u.a,null))}S.defaultProps={displayNotifications:!0};var k=c.a.create({centerComponent:{fontSize:20},badge:{position:"absolute",top:10,right:10,backgroundColor:"red"}}),I=n(65);function T(e){return i.a.createElement(I.a,{placeholder:e.placeholder,style:D(e).textInput,onChangeText:e.onChangeText,value:e.value,secureTextEntry:e.obscureText,multiline:e.multiline||!1,maxLength:e.maxLength||void 0})}var D=function(e){return c.a.create({textInput:{width:e.width,height:e.height||void 0,fontSize:23,padding:3,borderBottomWidth:e.outlinedBorder?void 0:2,borderColor:"black",borderWidth:e.outlinedBorder?5:void 0,borderRadius:e.outlinedBorder?25:0}})},O=n(67),B=n(32);function j(e){return i.a.createElement(B.a,{style:P(e).button,onPress:e.onPress},i.a.createElement(l.a,{style:P(e).buttonText},e.buttonText))}var N,P=function(e){return c.a.create({button:{backgroundColor:e.buttonColor,justifyContent:"center",alignItems:"center",borderRadius:23,paddingHorizontal:7,paddingVertical:5,shadowOpacity:.5,shadowRadius:2,shadowOffset:{width:0,height:4},elevation:20},buttonText:{fontSize:23,color:e.buttonTextColor,fontWeight:"bold",fontFamily:"cursive"}})},F=n(274),R=n.n(F),A=n(218),z=n(207);!function(e){e[e.successful=0]="successful",e[e.unknownError=1]="unknownError",e[e.badCredentials=2]="badCredentials",e[e.emptyField1=3]="emptyField1",e[e.emptyField2=4]="emptyField2",e[e.emailBadlyFormatted=5]="emailBadlyFormatted",e[e.userNotFound=6]="userNotFound",e[e.userDisabled=7]="userDisabled",e[e.operationNotAllowed=8]="operationNotAllowed",e[e.weakPassword=9]="weakPassword",e[e.emailAlreadyInUse=10]="emailAlreadyInUse",e[e.shortDetails=11]="shortDetails"}(N||(N={}));var L=N;function U(e){var t=Object(d.a)(),n=Object(o.useState)("abc@gmail.com"),a=g()(n,2),s=a[0],m=a[1],p=Object(o.useState)("testing"),h=g()(p,2),b=h[0],f=h[1],v=Object(o.useState)(!1),E=g()(v,2),w=E[0],k=E[1],I=Object(o.useState)(""),D=g()(I,2),B=D[0],N=D[1],P=Object(o.useState)(""),F=g()(P,2),U=F[0],W=F[1],V=Object(o.useState)(""),H=g()(V,2),K=H[0],M=H[1],q=Object(o.useState)(""),G=g()(q,2),J=G[0],Q=G[1],X=[{placeholder:"Email",onChangeText:function(e){return m(e)},value:s},{placeholder:"Password",onChangeText:function(e){return f(e)},value:b,obscureText:!0}],Y=[{buttonColor:"#4CAF50",buttonText:"Sign In",onPress:function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(te(s,b));case 2:t=n.sent,n.t0=t,n.next=n.t0===L.emptyField1?6:n.t0===L.emptyField2?8:n.t0===L.emailBadlyFormatted?10:n.t0===L.badCredentials?12:n.t0===L.successful?14:n.t0===L.userNotFound?16:n.t0===L.userDisabled?18:20;break;case 6:return alert("Empty email"),n.abrupt("break",21);case 8:return alert("Empty password"),n.abrupt("break",21);case 10:return alert("Email badly formatted"),n.abrupt("break",21);case 12:return alert("Wrong credentials"),n.abrupt("break",21);case 14:return e.navigation.replace("homeScreen"),n.abrupt("break",21);case 16:return alert("User not found"),n.abrupt("break",21);case 18:return alert("User disabled"),n.abrupt("break",21);case 20:alert("Some unknown error occurred");case 21:case"end":return n.stop()}}),null,null,null,Promise)}},{buttonColor:"#3F51B5",buttonText:"Sign Up",onPress:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(ne(s,b));case 2:e=t.sent,t.t0=e,t.next=t.t0===L.emptyField1?6:t.t0===L.emptyField2?8:t.t0===L.emailBadlyFormatted?10:t.t0===L.successful?12:t.t0===L.emailAlreadyInUse?14:t.t0===L.weakPassword?16:t.t0===L.operationNotAllowed?18:20;break;case 6:return alert("Empty email"),t.abrupt("break",21);case 8:return alert("Empty password"),t.abrupt("break",21);case 10:return alert("Email badly formatted"),t.abrupt("break",21);case 12:return k(!0),t.abrupt("break",21);case 14:return alert("Email already in use"),t.abrupt("break",21);case 16:return alert("Weak password"),t.abrupt("break",21);case 18:return alert("Operation not allowed"),t.abrupt("break",21);case 20:alert("Some unknown error occurred");case 21:case"end":return t.stop()}}),null,null,null,Promise)}}],Z=[{placeholder:"Name",onChangeText:function(e){return Q(e)},value:J},{placeholder:"Email ID",onChangeText:function(e){return N(e)},value:B},{placeholder:"Address",onChangeText:function(e){return W(e)},value:U},{placeholder:"Contact No.",onChangeText:function(e){return M(e)},value:K}],$=[{buttonText:"Submit",buttonColor:"purple",onPress:function(){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return k(!1),n.next=3,r.a.awrap(ae(J,B,U,K));case 3:t=n.sent,n.t0=t,n.next=n.t0===L.successful?7:9;break;case 7:return e.navigation.navigate("homeScreen"),n.abrupt("break",10);case 9:alert("Some Error Occurred");case 10:case"end":return n.stop()}}),null,null,null,Promise)}},{buttonText:"Cancel",buttonColor:"red",onPress:function(){return k(!1)}}],_=function(e){return c.a.create({background:{backgroundColor:"#F8BE85",height:"100vh"},modal:{marginLeft:e.width/2-e.width/2/2,marginTop:e.height/2-e.height/2/2,width:e.width/2,height:e.height/1.9,shadowOpacity:.5,shadowRadius:2,shadowOffset:{width:0,height:6},elevation:20,backgroundColor:"#FFC107",borderRadius:20},modalContent:{justifyContent:"flex-start",alignItems:"center",height:"100%",width:"100%",borderRadius:20},modalHeadingContainer:{paddingVertical:1,alignItems:"center",width:"100%"},modalHeading:{fontFamily:"cursive",fontSize:30,fontWeight:"bold"},modalButtonGroupContainer:{paddingTop:5},modalButtonContainer:{paddingBottom:e.height/60},imageContainer:{paddingVertical:20,justifyContent:"center",alignItems:"center"},avatar:{backgroundColor:"white",borderWidth:5},detailsContainer:{width:"100%",alignItems:"center"},textInputContainer:{paddingTop:20},buttonContainer:{paddingTop:15}})},ee=function(e,t){return null==e||0==e.trim().length?L.emptyField1:null==t||0==t.trim().length?L.emptyField2:R.a.validate(e)?L.successful:L.emailBadlyFormatted},te=function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if((n=ee(e,t))==L.successful){o.next=3;break}return o.abrupt("return",n);case 3:return o.prev=3,o.next=6,r.a.awrap(x.a.auth().signInWithEmailAndPassword(e,t));case 6:return o.abrupt("return",L.successful);case 9:o.prev=9,o.t0=o.catch(3),console.error(o.t0),a=o.t0.code,o.t1=a,o.next="auth/wrong-password"===o.t1?16:"auth/user-not-found"===o.t1?18:"auth/user-disabled"===o.t1?20:"auth/invalid-email"===o.t1?22:24;break;case 16:return o.abrupt("return",L.badCredentials);case 18:return o.abrupt("return",L.userNotFound);case 20:return o.abrupt("return",L.userDisabled);case 22:return o.abrupt("return",L.emailBadlyFormatted);case 24:return o.abrupt("return",L.unknownError);case 25:case 26:case"end":return o.stop()}}),null,null,[[3,9]],Promise)},ne=function(e,t){var n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if((n=ee(e,t))==L.successful){o.next=3;break}return o.abrupt("return",n);case 3:return o.prev=3,o.next=6,r.a.awrap(x.a.auth().createUserWithEmailAndPassword(e,t));case 6:return o.abrupt("return",L.successful);case 9:o.prev=9,o.t0=o.catch(3),console.error(o.t0),a=o.t0.code,o.t1=a,o.next="auth/email-already-in-use"===o.t1?16:"auth/invalid-email"===o.t1?18:"auth/operation-not-allowed"===o.t1?20:"auth/weak-password"===o.t1?22:24;break;case 16:return o.abrupt("return",L.emailAlreadyInUse);case 18:return o.abrupt("return",L.emailBadlyFormatted);case 20:return o.abrupt("return",L.operationNotAllowed);case 22:return o.abrupt("return",L.weakPassword);case 24:return o.abrupt("return",L.unknownError);case 25:case 26:case"end":return o.stop()}}),null,null,[[3,9]],Promise)},ae=function(e,t,n,a){return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.a.awrap(y.collection(C.firestore.collections.names.users).add({name:e,emailID:t,address:n,contactNo:a}));case 3:return o.sent,o.abrupt("return",L.successful);case 7:return o.prev=7,o.t0=o.catch(0),console.error(o.t0),o.abrupt("return",L.unknownError);case 11:case"end":return o.stop()}}),null,null,[[0,7]],Promise)};return i.a.createElement(u.a,{style:_(t).background},i.a.createElement(u.a,null,i.a.createElement(S,{title:"Login",displayNotifications:!1}),i.a.createElement(A.a,null,i.a.createElement(z.a,{dismissable:!1,visible:w,contentContainerStyle:_(t).modalContent,style:_(t).modal},i.a.createElement(u.a,{style:_(t).modalHeadingContainer},i.a.createElement(l.a,{style:_(t).modalHeading},"Information:")),i.a.createElement(u.a,null,Z.map((function(e){return i.a.createElement(u.a,null,i.a.createElement(T,{placeholder:e.placeholder,onChangeText:e.onChangeText,value:e.value,obscureText:!1,width:t.width/2/2}))})),i.a.createElement(u.a,{style:_(t).modalButtonGroupContainer},$.map((function(e){return i.a.createElement(u.a,{style:_(t).modalButtonContainer},i.a.createElement(j,{buttonText:e.buttonText,buttonColor:e.buttonColor,onPress:e.onPress,buttonTextColor:"white"}))})))))),i.a.createElement(u.a,{style:_(t).imageContainer},i.a.createElement(O.a,{rounded:!0,overlayContainerStyle:_(t).avatar,size:t.height/3,icon:{type:"ionicon",name:"leaf",color:"#63b175"}})),i.a.createElement(u.a,{style:_(t).detailsContainer},X.map((function(e){return i.a.createElement(u.a,{style:_(t).textInputContainer},i.a.createElement(T,{placeholder:e.placeholder,width:t.width/2,value:e.value,onChangeText:e.onChangeText,obscureText:!!e.obscureText&&e.obscureText}))})),i.a.createElement(u.a,null,Y.map((function(e){return i.a.createElement(u.a,{style:_(t).buttonContainer},i.a.createElement(j,{buttonText:e.buttonText,buttonTextColor:"white",buttonColor:e.buttonColor,onPress:e.onPress}))}))))))}var W=n(215),V=n(400);var H=function(){var e=Object(d.a)(),t=Object(o.useState)(""),n=g()(t,2),a=n[0],l=n[1],s=Object(o.useState)(""),m=g()(s,2),p=m[0],h=m[1],b=[{placeholder:"Name",onChangeText:function(e){return l(e)},value:a},{placeholder:"Description",onChangeText:function(e){return h(e)},value:p,maxLength:200,height:.6*e.height,multiline:!0}],f=function(e){return c.a.create({allTextInputsContainer:{paddingLeft:e.width/2-e.width/2/2},textInputContainer:{paddingTop:20},textInput:{fontSize:20},submitButtonContainer:{paddingTop:20,paddingLeft:e.width/2-50,paddingRight:e.width/2-50}})},v=function(e,t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Name and Description: "+e+" "+t),null!=e&&0!=e.trim().length){a.next=3;break}return a.abrupt("return",L.emptyField1);case 3:if(null!=t&&0!=t.trim().length){a.next=5;break}return a.abrupt("return",L.emptyField2);case 5:if(!(t.trim().length<10)){a.next=7;break}return a.abrupt("return",L.shortDetails);case 7:return a.next=9,r.a.awrap(y.collection(C.firestore.collections.names.itemsToExchange).add({name:e,description:t,timeStamp:x.a.firestore.Timestamp.now(),userID:null==(n=x.a.auth().currentUser)?void 0:n.email,sent:!1}).then((function(e){return L.successful})).catch((function(e){return L.unknownError})));case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}}),null,null,null,Promise)};return i.a.createElement(u.a,null,i.a.createElement(S,{title:"Request Screen",color:"#96D25A"}),i.a.createElement(u.a,{style:f(e).allTextInputsContainer},b.map((function(t){return i.a.createElement(u.a,{style:f(e).textInputContainer},i.a.createElement(T,{placeholder:t.placeholder,onChangeText:t.onChangeText,value:t.value,obscureText:!1,width:e.width/2,height:t.height||void 0,multiline:t.multiline||!1,maxLength:t.maxLength||void 0,outlinedBorder:!0}))}))),i.a.createElement(u.a,{style:f(e).submitButtonContainer},i.a.createElement(j,{buttonColor:"red",buttonText:"Submit",buttonTextColor:"white",onPress:function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(v(a,p));case 2:e=t.sent,t.t0=e,t.next=t.t0===L.emptyField1?6:t.t0===L.emptyField2?8:t.t0===L.shortDetails?10:t.t0===L.successful?12:14;break;case 6:return alert("Please fill the name field!"),t.abrupt("break",15);case 8:return alert("Please fill the description field!"),t.abrupt("break",15);case 10:return alert("Description too short!"),t.abrupt("break",15);case 12:return alert("Data submitted successfully!"),t.abrupt("break",15);case 14:alert("Some error occurred!");case 15:case"end":return t.stop()}}),null,null,null,Promise)}})))},K=n(22),M=n.n(K),q=n(159),G=n(74),J=n(208);var Q=function(e){var t=Object(o.useState)([]),n=g()(t,2),a=n[0],r=n[1],l=Object(o.useState)(null),s=g()(l,2),m=s[0],p=s[1],h=Object(o.useState)(),b=g()(h,2),f=(b[0],b[1],Object(d.a)());Object(w.useNavigation)(),Object(o.useEffect)((function(){0==a.length&&E(null)}),[]);var v=function(e){return c.a.create({exchangeButtonContainer:{height:"50%",width:.2*e.width},divider:{backgroundColor:"rgba(0,0,0,0.3)"}})},E=function(e){try{(null!=e?y.collection(C.firestore.collections.names.itemsToExchange).where("sent","==",!1).orderBy("timeStamp").startAfter(e).limit(1):y.collection(C.firestore.collections.names.itemsToExchange).where("sent","==",!1).limit(1)).onSnapshot((function(e){var t;t=e.docs.map((function(e){var t=e.data();return t.docID=e.id,t})),console.log(t),r((function(e){return e.push.apply(e,M()(t)),e})),t.length>0&&p((function(e){return t[t.length-1].timeStamp}))}))}catch(t){alert("Some error Occurred in fetching the data!"),console.log(t)}},x=function(t){e.navigation.navigate("itemDetailScreen",{item:t,navigation:e.navigation})},k=!0;return i.a.createElement(u.a,null,i.a.createElement(S,{title:"Exchange Screen",color:"#ffca28",drawerAvailable:!0}),i.a.createElement(u.a,null,i.a.createElement(q.a,{data:a,renderItem:function(e){var t=e.item;e.index;return i.a.createElement(u.a,null,i.a.createElement(u.a,null,i.a.createElement(G.a.Item,{theme:{colors:{text:"black"}},left:function(e){return i.a.createElement(G.a.Icon,{icon:"table-furniture",color:"black"})},right:function(e){return i.a.createElement(u.a,{style:v(f).exchangeButtonContainer},i.a.createElement(j,{buttonText:"Exchange",buttonTextColor:"white",buttonColor:"red",onPress:function(){return x(t)}}))},title:t.name,description:t.description}),i.a.createElement(J.a,{style:v(f).divider})))},keyExtractor:function(e,t){return t.toString()},onEndReachedThreshold:7,onEndReached:function(){k||E(m)},onMomentumScrollBegin:function(){k=!1}})))},X=n(161);var Y=function(){var e=Object(V.a)();return i.a.createElement(e.Navigator,{barStyle:{backgroundColor:"purple"}},i.a.createElement(e.Screen,{name:"exchangeScreen",component:Q,options:{tabBarLabel:"Exchange Screen",title:"Exchange Items",tabBarIcon:function(e){var t=e.color;return i.a.createElement(X.default,{name:"handshake-o",size:20,color:t})}}}),i.a.createElement(e.Screen,{name:"requestScreen",component:H,options:{tabBarLabel:"Request Screen",title:"Request Items",tabBarIcon:function(e){var t=e.color;return i.a.createElement(X.default,{name:"envelope-open",size:20,color:t})}}}))};var Z=function(){var e=Object(o.useState)(""),t=g()(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),l=g()(r,2),s=l[0],m=l[1],p=Object(o.useState)(""),h=g()(p,2),b=h[0],f=h[1],v=Object(o.useState)(""),E=g()(v,2),w=E[0],k=E[1],I=Object(o.useState)(""),D=g()(I,2),O=D[0],B=D[1],N=Object(d.a)();Object(o.useEffect)((function(){var e,t=null==(e=x.a.auth().currentUser)?void 0:e.email;t?R(t):alert("User not signed in")}),[]);var P=function(e){return c.a.create({background:{backgroundColor:"#CDDC39",height:"100vh"},textInputContainer:{paddingTop:e.height/50,alignItems:"center"},buttonContainer:{paddingTop:e.height/50,paddingLeft:e.width/2-e.width/4/2,paddingRight:e.width/2-e.width/4/2}})},F=C.firestore,R=function(e){try{y.collection(F.collections.names.users).where("emailID","==",e).limit(1).onSnapshot((function(e){e.docs.map((function(e){B(e.id);var t=e.data();a(t.name),m(t.emailID),f(t.address),k(t.contactNo)}))}))}catch(t){console.error(t),alert("Some error occurred while fetching the details.")}},A=[{placeholder:"Name",onChangeText:function(e){return a(e)},value:n},{placeholder:"Email ID",onChangeText:function(e){return m(e)},value:s},{placeholder:"Address",onChangeText:function(e){return f(e)},value:b},{placeholder:"Contact No.",onChangeText:function(e){return k(e)},value:w}];return i.a.createElement(u.a,{style:P(N).background},i.a.createElement(S,{title:"Settings Screen",color:"#1e9c91",drawerAvailable:!0}),i.a.createElement(u.a,null,i.a.createElement(u.a,null,A.map((function(e){return i.a.createElement(u.a,{style:P(N).textInputContainer},i.a.createElement(T,{placeholder:e.placeholder,onChangeText:e.onChangeText,value:e.value,obscureText:!1,outlinedBorder:!0,height:N.height/12,width:N.width/2}))}))),i.a.createElement(u.a,{style:P(N).buttonContainer},i.a.createElement(j,{buttonColor:"rgba(88,111,121,1.0)",buttonText:"Submit",buttonTextColor:"white",onPress:function(){return function(e,t,n,a){try{y.collection(F.collections.names.users).doc(O).update({name:e,emailID:t,address:n,contactNo:a}),alert("User details updated successfully")}catch(r){console.error(r),alert("Some error occured in saving the user details")}}(n,s,b,w)}}))))},$=n(85);var _=function(){var e=Object(o.useState)([]),t=g()(e,2),n=t[0],a=t[1];Object(d.a)(),Object(o.useEffect)((function(){var e,t=[],n=null==(e=x.a.auth().currentUser)?void 0:e.email;try{var r=C.firestore;c&&(n?y.collection(r.collections.names.barters).where(r.collections.barters.names.donorID,"==",n).onSnapshot((function(e){e.docs.map((function(e){var n=e.data();t.push(n)})),a(t)})):alert("User not signed in"))}catch(o){console.error(o),alert("Some error occurred in fetching the barters")}}),[]);var c=!0;return i.a.createElement(u.a,null,i.a.createElement(S,{title:"My Barters Screen",drawerAvailable:!0}),i.a.createElement(u.a,null,i.a.createElement($.a,{data:n,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item;e.index;return i.a.createElement(u.a,null,i.a.createElement(G.a.Item,{theme:{colors:{text:"black"}},left:function(e){return i.a.createElement(G.a.Icon,{icon:"table-furniture",color:"black"})},right:function(e){return i.a.createElement(u.a,null,i.a.createElement(j,{buttonText:"Send",buttonTextColor:"white",buttonColor:"red",onPress:function(){return function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(y.collection(C.firestore.collections.names.itemsToExchange).doc(e.docID).update({sent:!0}));case 2:return t.next=4,r.a.awrap(y.collection(C.firestore.collections.names.barters).doc(e.docID).update({status:"sent"}));case 4:return t.next=6,r.a.awrap(y.collection(C.firestore.collections.names.notifications).doc(e.docID).set({docID:e.docID,receiverID:e.receiverID,donorID:e.donorID,itemName:e.itemName,itemDescription:e.itemDescription,read:!1}));case 6:alert("Item "+e.itemName+" sent to "+e.receiverID);case 7:case"end":return t.stop()}}),null,null,null,Promise)}(t)}}))},title:t.itemName,description:"Status: "+t.status}),i.a.createElement(J.a,null))},onMomentumScrollBegin:function(){c=!1}})))};var ee=function(){var e=Object(w.useRoute)(),t=Object(d.a)(),n=e.params.item,a=e.params.navigation,r=function(e){return c.a.create({itemKey:{fontWeight:"bold",fontSize:20},itemValue:{fontSize:20},sendButtonContainer:{paddingTop:20,paddingRight:e.width/2-e.width/3/2,paddingLeft:e.width/2-e.width/3/2}})};return i.a.createElement(u.a,null,i.a.createElement(S,{title:"Item Details Screen",backButtonAvailable:!0}),i.a.createElement(u.a,null,[{keyName:"Item Name",itemKeyNameInItemObject:"name"},{keyName:"Item Description",itemKeyNameInItemObject:"description"},{keyName:"Time of Request",itemKeyNameInItemObject:"timeStamp"},{keyName:"Reciever ID",itemKeyNameInItemObject:"userID"}].map((function(e){return i.a.createElement(u.a,null,i.a.createElement(O.b,{containerStyle:{borderRadius:15}},i.a.createElement(l.a,{style:r(t).itemValue},i.a.createElement(l.a,{style:r(t).itemKey},e.keyName,": "),n[e.itemKeyNameInItemObject].toString())))})),i.a.createElement(u.a,null,i.a.createElement(u.a,{style:r(t).sendButtonContainer},i.a.createElement(j,{onPress:function(){var e;a.navigate("myBartersScreen"),y.collection(C.firestore.collections.names.barters).doc(n.docID).set({donorID:null==(e=x.a.auth().currentUser)?void 0:e.email,receiverID:n.userID,itemName:n.name,itemDescription:n.description,status:"notSent",docID:n.docID})},buttonColor:"red",buttonText:"Send",buttonTextColor:"white"})))))},te=n(15),ne=n(278);var ae=function(){var e=Object(o.useState)([]),t=g()(e,2),n=t[0],a=t[1],r=Object(d.a)();Object(o.useEffect)((function(){var e,t=[],n=null==(e=x.a.auth().currentUser)?void 0:e.email;try{var r=C.firestore;m&&(n?y.collection(r.collections.names.notifications).where("receiverID","==",n).where("read","==",!1).onSnapshot((function(e){e.docs.map((function(e){var n=e.data();t.push(n)})),a(t)})):alert("User not signed in"))}catch(o){console.error(o),alert("Some error occurred in fetching the barters")}}),[]);var s=function(e){return c.a.create({rowBehind:{alignItems:"center",backgroundColor:"#29b6f6",flex:1,flexDirection:"row",justifyContent:"space-between",paddingLeft:15},container:{backgroundColor:"white",flex:1},backTextWhite:{color:"#FFF",fontWeight:"bold",fontSize:15,textAlign:"center",alignSelf:"flex-start"},rowBack:{alignItems:"center",backgroundColor:"#29b6f6",flex:1,flexDirection:"row",justifyContent:"space-between",paddingLeft:15},backRightBtn:{alignItems:"center",bottom:0,justifyContent:"center",position:"absolute",top:0,width:100},backRightBtnRight:{backgroundColor:"#29b6f6",right:0}})},m=!0;return i.a.createElement(u.a,null,i.a.createElement(S,{title:"Notifications Screen",drawerAvailable:!0,displayNotifications:!1}),i.a.createElement(u.a,null,i.a.createElement(ne.a,{data:n,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item,n=e.index;return i.a.createElement(te.a.View,null,i.a.createElement(O.d,{key:n,bottomDivider:!0},i.a.createElement(O.d.Chevron,null,i.a.createElement(O.c,{name:"notification",type:"font-awesome",color:"#696969",size:50})),i.a.createElement(O.d.Content,null,i.a.createElement(O.d.Title,{style:{color:"black",fontWeight:"bold"}},t.itemName),i.a.createElement(O.d.Subtitle,null,"Donor interested"))),i.a.createElement(J.a,null))},disableLeftSwipe:!0,leftOpenValue:r.width,renderHiddenItem:function(){return i.a.createElement(u.a,{style:s().rowBack},i.a.createElement(u.a,{style:[s().backRightBtn,s().backRightBtnRight]},i.a.createElement(l.a,{style:s().backTextWhite},"Mark as read")))},onSwipeValueChange:function(e){var t=e.key,o=e.value;if((o>r.width||o<-r.width)&&void 0!=n[t]){var i=n[t].docID,c=M()(n);c.splice(t,1),a(c),y.collection(C.firestore.collections.names.notifications).doc(i).update({read:!0})}},onMomentumScrollBegin:function(){m=!1},previewRowKey:"0",previewOpenValue:-40,previewOpenDelay:3e3})))};function re(){var e=Object(p.a)(),t={headerShown:!1},n=[{name:"loginScreen",component:U},{name:"homeScreen",component:Y},{name:"itemDetailScreen",component:ee},{name:"myBartersScreen",component:_},{name:"notificationsScreen",component:ae}];return i.a.createElement(e.Navigator,{initialRouteName:"loginScreen"},n.map((function(n){return i.a.createElement(e.Screen,{name:n.name,component:n.component,options:t})})))}function oe(){Object(d.a)();var e=Object(h.a)(),t={headerShown:!1},n=function(e){return c.a.create({drawer:{borderTopRightRadius:20,borderBottomRightRadius:20},drawerContent:{flex:1},logOutButton:{flex:1,justifyContent:"flex-end",paddingLeft:"5%",paddingBottom:"5%"},logOutButtonContent:{flexDirection:"row",alignItems:"center"},logOutButtonText:{paddingLeft:"3%",fontWeight:"bold",fontSize:15}})},a=[{name:"Home",component:re},{name:"Settings",component:Z},{name:"My Barters",component:_},,{name:"Notifications",component:ae}];return i.a.createElement(W.a,null,i.a.createElement(m.a,null,i.a.createElement(e.Navigator,{initialRouteName:"homeScreen",drawerStyle:n().drawer,drawerContent:function(e){return i.a.createElement(u.a,{style:n().drawerContent},i.a.createElement(b.a,{state:e.state,navigation:e.navigation,descriptors:e.descriptors,progress:e.progress}),i.a.createElement(u.a,{style:n().logOutButton},i.a.createElement(q.b,{onPress:function(){return t=e.navigation,r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(x.a.auth().signOut());case 2:t.navigate("loginScreen");case 3:case"end":return e.stop()}}),null,null,null,Promise);var t}},i.a.createElement(u.a,{style:n().logOutButtonContent},i.a.createElement(O.c,{name:"power-off",type:"font-awesome"}),i.a.createElement(l.a,{style:n().logOutButtonText},"Log Out")))))},drawerType:"front"},a.map((function(n){return i.a.createElement(e.Screen,{name:n.name,component:n.component,options:t})})))))}!function(){if("web"==s.a.OS){var e=document.createElement("style");e.textContent="textarea, select, input, button { outline: none!important; }",document.head.append(e)}}()},309:function(e,t,n){e.exports=n(379)}},[[309,1,2]]]);
//# sourceMappingURL=app.75d9a512.chunk.js.map